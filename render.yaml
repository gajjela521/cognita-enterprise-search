services:
  # 1. Java API Gateway
  - type: web
    name: cognita-api-gateway
    env: java
    region: oregon
    plan: free
    buildCommand: "./gradlew clean build -x test"
    startCommand: "java -jar build/libs/cognita-api-gateway-1.0.0.jar"
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: prod
      - key: VECTOR_SERVICE_URL
        fromService:
          type: web
          name: cognita-vector-service
          property: url
    healthCheckPath: /api/health

  # 2. Python Vector Service
  - type: web
    name: cognita-vector-service
    env: python
    region: oregon
    plan: free
    repo: https://github.com/render-examples/flask-hello-world # Placeholder, assumes monorepo usually requires context
    # Render monorepo support needs Root Directory setting in the UI or buildCommand adjustment
    rootDir: cognita-vector-service
    buildCommand: "pip install -r requirements.txt"
    startCommand: "gunicorn server:app"
    envVars:
      - key: PYTHON_VERSION
        value: 3.9.0
